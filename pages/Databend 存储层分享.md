- 确定一下主题？要分享什么呢？听众会有什么样的收获？
	- 如何基于对象存储来开发数据库？好处与坏处？踩坑？
-
- 先罗列一下可能可以讲的主题，然后再选择主干吧
	- 数据仓库介绍？
		- 要不要介绍 [[Hive]]？
		- Lambda？Kappa？
		- Delta Lake？
		- Apache Hudi?
		- Apache [[Iceberg]]？
		- [[Snowflake]]
			- 可能需要再读一读 snowflake 的 paper
		- AWS Redshift
		- Azure Data Warehouse
			- Azure Databricks
		- Google BigQuery
	- [[Databend]] 整体架构
		- meta + query
		- ![image.png](../assets/image_1652967714977_0.png)
	- 存储层需要做什么
		- 数据压缩
	- 技术选型考虑
		- 为什么没有自研存储？
		- 为什么没有使用 [[RocksDB]] 等方案？
		- 存算分离？
		- 对象存储的简单介绍
			- 本次分享应该更偏使用者，技术细节上是否不用介绍太多，主要围绕功能展开？
	- 存储层设计
		- FUSE Engine
		- 存储层支持
		- 自动分区/分片
		- time travel / data sharing
	- 功能：COPY/STAGE
	- 未来规划
-
-
- 大纲
	- 标题: Databend: The Storage Layer
	- 内容
		- Databend 简介
		- Databend 设计思路
			- Day One Open Source
			- Column Based Storage
			- Cloud Native by OpenDAL
			- DBMS instead of Query Engine
		- Databend 存储层实现
-
- 内容
	- Hi，大家好，我是漩涡。今天想要跟大家分享的是开源云上数仓的 Databend 的存储层设计及其实现。
	- 首先做个自我介绍，我是漩涡，漩涡鸣人的漩涡。我是一个彻底的开源主义者：
		- 我公开地进行学习，所有我学到的东西都会记录在 note.xuanwo.io
		- 我公开地进行工作，所有的工作内容都通过 Github Projects 跟踪，参见 work.xuanwo.io
		- 最后我会公开地输出我的思考，所有的产出都会发布在个人博客 xuanwo.io
	- 在背后支持我的团队叫做 Datafuse Labs，目前我在这家团队从事 Databend 存储层相关的全职开源工作。
		- Datafuse Labs 的愿景是构建全新的云上数据平台，易用，简单，低成本
		- 目前 Datafuse Labs 旗下的开源项目包括 Databend，Openraft，OpenDAL，OpenSrv 等多个项目
		- 今天要介绍的就是 Databend：一个由 Rust 开发的云上数仓
	- 当我们聊到数仓的时候我们都会想到 Hive，Hudi，Impala 之类的服务，但是在 Snowflake 横空出世后，大家发现大数据也可以很简单。
		- 不需要部署，不需要运维，按量计费
		- 不需要担心 Shared-disk 架构下性能不足，数据难以复制和迁移的问题
		- 也不需要担心 Shared-nothing 架构下难以升级和扩容的问题。
		- 只需要给 Snowflake 不断充钱，就可以不断地扩展存储和计算能力
	- Databend 就是看到了这样趋势和机会而诞生的。
		- (需要想一下怎么过渡)
	- 接下来我们聊聊 Databend 背后的设计理念。我把 Databend 的设计思路概括为这样几个点
		- Day One Open Source
		- Column Based Storage
		- Cloud Native by OpenDAL
		- DBMS instead of Query Engine
	- 伴随着 PingCAP 的探索和试错，Day One Open Source 已经不是什么稀奇的事情了。
		- Databend 开源的逻辑很简单：
			- 首先 Infra Open Source 已经成了业界的基本共识，一家初创公司开发一个全新的闭源数据仓库基本上必死，只有走开源路线才有成功的机会。
			- 其次，Databend 的核心团队都是开源老兵，BohuTANG，sundy-li，zhang2014 都是 ClickHouse Too 100 的贡献者，走开源路线是一个非常自然的选择。
			- 这里还有一个跟 TiFlash 有关的 Fun Fact：由于 TiFlash fork 自 ClickHouse，所以 Databend 的核心团队也都是 TiFlash 的贡献者，有趣的开源世界。
	- Databend 采用 Arrow 作为内存结构，Parquet 作为存储格式
		- (先介绍 Arrow，然后介绍一下 Parquet)
	- 云原生
		- 可能需要介绍三种不同架构的区别？
		- 对比一下 TiFlash
	- Full DBMS
		- 跟 Query Engine 的区别
	- 好，前面聊了不少 Databend 的设计思路，下面聊聊存储层的具体实现，今天主要会聊聊三个模块
		- 首先是 FUSE Engine，这是 Databend 默认的存储引擎；然后聊一下 Databend 的 Stage 功能，最后聊聊驱动 Databend 存储底层的模块 OpenDAL。
	- 先看 FUSE Engine
	- Stage 是借鉴自 Snowflake 的功能
	- OpenDAL 是驱动 Databend 存储底层的模块，所有对存储的请求和访问最后都会交由 OpenDAL 来负责
	-
	-
-
- 归档
	- [[Databend]] 介绍？
	  collapsed:: true
		- 大多数人对数仓和 [[Databend]] 可能没有概念，需要展开介绍
			- 需要再介绍一下 [[Databend]] 的特性和差异
		- 还需要介绍 [[Snowflake]]？
			- 可能首先介绍 [[Snowflake]]？
	- 分享内容
		- How we build [[Databend]] ([[Storage]] Part)？
			- 感觉这个主题不是非常适合这次的 Meetup
			-
			- 2021 年，[[OLAP]] 领域有哪些选择？
				- [[Snowflake]] / [[Google BigQuery]] / [[AWS Redshift]]
					- 商业产品，付费高昂，供应商锁定
				- [[ClickHouse]]
					- 单机引擎，需要改造以适应大规模数据场景
				- [[Hadoop]] 生态
					- [[Hive]] / [[Hudi]]  / [[Iceberg]] / [[Impala]] / [[Spark SQL]] / [[Flink SQL]] / [[Druid]]
					- 臃肿，复杂，笨重，部署难，维护麻烦
					- 现在系统对时效性要求高，更新困难
				- [[Presto]] / [[Trino]]
					- 并不是一个真正的 DBMS，只是一个 Query Engine，纯内存？
						- 需要补充更多的资料
			- 在 2021 年，我们有什么？
				- [[Rust]]
				- Cloud Serivces： [[AWS]]，GCP，[[Azure]]，Aliyun
				- [[Arrow]] / [[Parquet]]
			- 愿景
				- A Modern Real-Time Data Processing & Analytics DBMS with Cloud-Native Architecture
				- ![image.png](../assets/image_1652967714977_0.png)
			- Goal
				- Modern
				- Real-Time
				- [[OLAP]]
				- Cloud-Native
			- How？
				- 这个部分可能需要收窄到 [[Storage]] ？
					- 不需要将具体的开发
			-
		- [[Databend]] [[存储]]层分享
			- 主题
				- 感觉主要还是围绕功能做一些介绍
				- 首先介绍一下 [[Databend]] / [[Snowflake]]，然后介绍[[存储]]层的一些特性
					- 首先是 [[Databend]] 的 [[Storage]] Backend
					- 然后是 Stage: InternalStage / ExternalStage
			- 大纲
				- [[Databend]] 介绍
					- Modern
					- Cloud Native
					- Open Source
				- 设计
					- Day One Open Source
						- 与闭源 DBMS 的异同
					- Column Based [[Storage]]
						- [[Arrow]] / [[Parquet]]
						- 与传统列存的对比
					- Cloud First ([[OpenDAL]])
						- 单个 Query 延迟上升，总体吞吐大幅度上升
						- 成本低廉
						- 与  [[TIDB]] / [[TiFlash]] 的异同
							- ![image.png](../assets/image_1653279558237_0.png)
					- DBMS instead of Query Engine
						- 与 [[Presto]] 的异同
						- 性能，对[[存储]]的感知
						- micro partition，compaction
				- 存储底层实现
					- FUSE Engine
						- Git inspired storage engine
						- Git
							- HEAD
							- Commit
							- Tree
							- Block
						- Fuse
							- HEAD
							- Snapshot
							- Segment
							- Block -> Parquet
					- [[OpenDAL]]
						- https://github.com/datafuselabs/opendal
						- Open Data Access Layer that connect the whole world together.
						- services
							- azblob
							- fs
							- hdfs
							- memory
							- s3
				- Q&A
					-
			-
-
- 参考资料
	- [Snowflake：数据仓库的终极形态？](https://zhuanlan.zhihu.com/p/54439354)
	  collapsed:: true
		- > 关于微软对snowflake的支持，我觉得可以从三个方面细谈。
			- > 第一，云服务商业模式很简单，就是靠scale来吸引consumption。所以对微软来说，提供对snowflake的支持虽然从某种意义上在“打击”自家的数据服务，但是反过来想，snowflake的客户可以把数据放在Azure上了。这个逻辑就是，不管你用什么解决方案，只要你的数据在我手里，我就支持。
			- > 第二，未来趋势是multi-cloud，也就是说尽量不把鸡蛋放一个篮子里，用来分摊技术和商业的风险。Multi-cloud solution关键就是要easy to migrate，如果微软只想着防守，那客户就永远不能从AWS转到Azure上，相反，提供Snowflake on Azure，就是给AWS客户转化的机会。有机会可以看一下上周snowflake的新一轮融资，Salesforce领投，更是坚定了data sharing的战略路线。
			- > 第三，从战略上讲不仅要培养好的伙伴，更要培养好的竞争对手。Snowflake还不明显，Azure Databricks才是最有意思的案例。Azure Databricks已经是Azure first tier service 很多人甚至以为Databricks就是微软的。云计算就是让客户怎么舒服怎么来，如果有好的技术，平台就应该吸引。
	- [数据仓库技术选型之 ClickHouse|清风](https://www.modb.pro/db/197700)
	- [从数仓到数据中台，谈技术选型最优解](https://www.infoq.cn/article/jqr7zoiucoqi0skgiagb)
	- [Presto 优缺点](https://zhuanlan.zhihu.com/p/93711386)
	- [即席查询引擎对比：我为什么选择Presto](https://cloud.tencent.com/developer/article/1877751)
	- [How we build TiDB](https://en.pingcap.com/blog/how-we-build-tidb/)
	- [TiFlash 架构与原理](https://book.tidb.io/session1/chapter9/tiflash-architecture.html)
	- [Rust, Databend and the Cloud Warehouse（5）从 Git 到 Fuse Engine 存储引擎](https://bohutang.me/2022/05/06/databend-cloud-warehouse-fuse-engine/)
	- [Apache Arrow简介](https://zhuanlan.zhihu.com/p/339132159)
-